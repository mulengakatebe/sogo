From: Jeroen Dekkers <jeroen@dekkers.ch>
Date: Thu, 10 May 2012 03:27:43 +0200
Subject: Put private libraries in /usr/lib/sogo

---
 Main/GNUmakefile                       | 2 +-
 Main/GNUmakefile.preamble              | 2 +-
 OGoContentStore/GNUmakefile            | 2 ++
 OGoContentStore/GNUmakefile.preamble   | 2 +-
 OpenChange/GNUmakefile                 | 4 ++--
 SOPE/GDLContentStore/GNUmakefile       | 1 +
 SOPE/NGCards/GNUmakefile               | 1 +
 SoObjects/SOGo/GNUmakefile             | 3 +++
 SoObjects/common.make                  | 2 +-
 Tests/Integration/GNUmakefile.preamble | 2 +-
 Tests/Unit/GNUmakefile                 | 4 ++--
 Tools/GNUmakefile                      | 2 ++
 Tools/GNUmakefile.preamble             | 2 +-
 UI/AdministrationUI/GNUmakefile        | 1 +
 UI/Common/GNUmakefile                  | 1 +
 UI/Contacts/GNUmakefile                | 1 +
 UI/MailPartViewers/GNUmakefile         | 1 +
 UI/MailerUI/GNUmakefile                | 1 +
 UI/MainUI/GNUmakefile                  | 1 +
 UI/PreferencesUI/GNUmakefile           | 1 +
 UI/SOGoUI/GNUmakefile                  | 3 +++
 UI/Scheduler/GNUmakefile               | 1 +
 UI/common.make                         | 4 ++--
 23 files changed, 32 insertions(+), 12 deletions(-)

Index: sogo/OpenChange/GNUmakefile
===================================================================
--- sogo.orig/OpenChange/GNUmakefile	2015-01-23 19:23:56.269579516 +0100
+++ sogo/OpenChange/GNUmakefile	2015-01-23 19:23:56.257579516 +0100
@@ -5,6 +5,8 @@
 include $(GNUSTEP_MAKEFILES)/common.make
 include ../Version
 
+ADDITIONAL_LDFLAGS += -Wl,--rpath,/usr/lib/sogo
+
 BACKEND_VERSION = 1.0.0
 
 ### bootstrap library
Index: sogo/Tools/GNUmakefile
===================================================================
--- sogo.orig/Tools/GNUmakefile	2015-01-23 19:23:56.269579516 +0100
+++ sogo/Tools/GNUmakefile	2015-01-23 19:23:56.261579516 +0100
@@ -6,6 +6,8 @@
 
 ADDITIONAL_LDFLAGS += -Wl,--rpath,$(SOGO_SYSLIBDIR)/sogo
 
+ADDITIONAL_LDFLAGS += -Wl,--rpath,/usr/lib/sogo
+
 ###
 SOGO_TOOL = sogo-tool
 $(SOGO_TOOL)_INSTALL_DIR = $(SOGO_ADMIN_TOOLS)
Index: sogo/UI/SOGoUI/GNUmakefile
===================================================================
--- sogo.orig/UI/SOGoUI/GNUmakefile	2015-01-23 19:23:56.269579516 +0100
+++ sogo/UI/SOGoUI/GNUmakefile	2015-01-23 19:23:56.265579516 +0100
@@ -13,6 +13,8 @@
 
 ADDITIONAL_LDFLAGS += -Wl,--rpath,$(SOGO_SYSLIBDIR)/sogo
 
+ADDITIONAL_LDFLAGS += -Wl,--rpath,/usr/lib/sogo
+
 libSOGoUI_HEADER_FILES +=	\
 	\
 	UIxJSClose.h		\
Index: sogo/SoObjects/Appointments/GNUmakefile
===================================================================
--- sogo.orig/SoObjects/Appointments/GNUmakefile	2015-01-23 19:23:56.269579516 +0100
+++ sogo/SoObjects/Appointments/GNUmakefile	2015-01-23 19:23:56.265579516 +0100
@@ -60,7 +60,7 @@
 
 ADDITIONAL_INCLUDE_DIRS += -I../../SOPE/
 ADDITIONAL_LIB_DIRS += -L../../SOPE/GDLContentStore/obj/
-ADDITIONAL_LDFLAGS += -Wl,--no-as-needed -lcurl
+ADDITIONAL_LDFLAGS += -Wl,--no-as-needed -lcurl -Wl,--rpath,/usr/lib/sogo
 
 -include GNUmakefile.preamble
 include $(GNUSTEP_MAKEFILES)/wobundle.make
Index: sogo/SoObjects/Contacts/GNUmakefile
===================================================================
--- sogo.orig/SoObjects/Contacts/GNUmakefile	2015-01-23 19:23:56.269579516 +0100
+++ sogo/SoObjects/Contacts/GNUmakefile	2015-01-23 19:23:56.265579516 +0100
@@ -33,6 +33,7 @@
 
 ADDITIONAL_INCLUDE_DIRS += -I../../SOPE/
 ADDITIONAL_LIB_DIRS += -L../../SOPE/GDLContentStore/obj/
+ADDITIONAL_LDFLAGS += -Wl,--rpath,/usr/lib/sogo
 
 -include GNUmakefile.preamble
 include $(GNUSTEP_MAKEFILES)/bundle.make
Index: sogo/ActiveSync/GNUmakefile
===================================================================
--- sogo.orig/ActiveSync/GNUmakefile	2015-01-23 19:23:56.269579516 +0100
+++ sogo/ActiveSync/GNUmakefile	2015-01-23 19:23:56.265579516 +0100
@@ -33,9 +33,9 @@
 
 ADDITIONAL_OBJCFLAGS += -Wno-deprecated-declarations
 ADDITIONAL_INCLUDE_DIRS += -I../SOPE/ -I../SoObjects/
-ADDITIONAL_LIB_DIRS += -L../SOPE/GDLContentStore/obj/ -L../SoObjects/SOGo/SOGo.framework -L../SOPE/GDLContentStore/obj -L ../SOPE/NGCards/obj
+ADDITIONAL_LIB_DIRS += -L../SOPE/GDLContentStore/obj/ -L../SoObjects/SOGo/SOGo.framework/sogo -L../SOPE/GDLContentStore/obj -L ../SOPE/NGCards/obj
 ADDITIONAL_INCLUDE_DIRS += -I/usr/include/libwbxml-1.0/
-ADDITIONAL_LDFLAGS += -Wl,--no-as-needed -lwbxml2
+ADDITIONAL_LDFLAGS += -Wl,--no-as-needed -lwbxml2 -Wl,--rpath,/usr/lib/sogo
 
 -include GNUmakefile.preamble
 include $(GNUSTEP_MAKEFILES)/bundle.make
